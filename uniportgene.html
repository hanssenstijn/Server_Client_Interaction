<!DOCTYPE html>
<html>
<head>
  <title>About Atrial Fibrillation</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!-- Copyright (c) 2017  Egon Willighagen <egon.willighagen@maastrichtuniversity.nl>
     MIT license
-->

  <!-- ops.js -->
  <script type="text/javascript" src="https://egonw.github.io/pils/lib/purl.js"></script>
  <script type="text/javascript" src="https://egonw.github.io/pils/lib/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="https://egonw.github.io/pils/lib/d3.v3.min.js"></script>
  <script type="text/javascript" src="https://egonw.github.io/pils/src/combined.js"></script>

</head>

<body>
  <h3>About Atrial Fibrillation</h3>
  <h4>Gene list</h4>
  <p>	<div id="list"></div></p>
  <h4>JSON</h4>
  <div id="json">Pending...</div>

  <!-- dynamically create a table with type information -->
  <script type="text/javascript">
var targetService = new TargetSearch(
  "https://beta.openphacts.org/2.2", "91f5d4d0", "1af5086da757e57c553bfa1351708d5f"
);
var handleAssociations = function(success, status, jsonData) {
   d3.select("#json").html("<pre>" + JSON.stringify(jsonData, undefined, 2) + "</pre>");
   var itemCount = jsonData.items.length;
   for (var i = 0; i < itemCount; i++) {
      item = jsonData.items[i]
      if (item.gene) {
        var node = document.createElement("li");
        var textnode = document.createTextNode(item.gene._about);
        node.appendChild(textnode);
        document.getElementById("list").appendChild(node);
      }
   }
};
var handleCount = function(success, status, jsonData) {
   d3.select("#json").html("<pre>" + JSON.stringify(jsonData, undefined, 2) + "</pre>");
   console.log(jsonData)

//  if (jsonData.primaryTopic.targetPharmacologyTotalResults) {
	var node = document.createElement("li");
	var textnode = document.createTextNode("Count "+ jsonData.primaryTopic.targetPharmacologyTotalResults);
	node.appendChild(textnode);
	document.getElementById("list").appendChild(node);
//  }

};
targetService.targetPharmacologyCount(
  'http://purl.uniprot.org/uniprot/O15151', null, null, null, null,null,null,null,null,null,null,null,null,null,null,null,null,null,
  handleCount
);
  </script>
</body>
</html>