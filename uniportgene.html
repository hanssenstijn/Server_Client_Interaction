<!DOCTYPE html>
<html>
<head>
  <title>About Atrial Fibrillation</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!-- Copyright (c) 2017  Egon Willighagen <egon.willighagen@maastrichtuniversity.nl>
     MIT license
-->

  <!-- ops.js -->
  <script type="text/javascript" src="https://egonw.github.io/pils/lib/purl.js"></script>
  <script type="text/javascript" src="https://egonw.github.io/pils/lib/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="https://egonw.github.io/pils/lib/d3.v3.min.js"></script>
  <script type="text/javascript" src="https://egonw.github.io/pils/src/combined.js"></script>

</head>

<body>
  <h3>uniprot/O15151</h3>
  <div id="uri"></div>
  <h4>Gene list</h4>
  <p>	<div id="list"></div></p>
  <h4>JSON</h4>
  <div id="json">Pending...</div>

  <!-- dynamically create a table with type information -->
  <script type="text/javascript">
var queryGene = 'http://identifiers.org/uniprot/O15151' 
var node = document.createElement("li");
var textnode = document.createTextNode(queryGene);
        node.appendChild(textnode);
        document.getElementById("uri").appendChild(node);

var targetService = new TargetSearch(
  "https://beta.openphacts.org/2.2", "36e9b2ed", "9ab8bd4a1e8dff488ac3a469408de00d"
);

var handleAssociations = function(success, status, jsonData) {
   d3.select("#json").html("<pre>" + JSON.stringify(jsonData, undefined, 2) + "</pre>");
   var itemCount = jsonData.items.length;
   for (var i = 0; i < itemCount; i++) {
      item = jsonData.items[i]
      if (item.hasMolecule) {
        var node = document.createElement("li");
        var textnode = document.createTextNode(item.hasMolecule._about);
        node.appendChild(textnode);
        document.getElementById("list").appendChild(node);
      }
   }
};
targetService.targetPharmacology(
  queryGene, null,null,null,null,null,
  null,null,null,null,
  null,null,null,null,null,null,
  null,null,null,
  null,null,
  handleAssociations
);
  </script>
</body>
</html>